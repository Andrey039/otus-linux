# **Введение**

Для выполнения задания использовались следующие инструменты:
- **VirtualBox** - ПО для создания виртуальных окружений
- **Vagrant** - ПО для конфигурирования/шаблонизирования виртуальных машин
- **Git** - система контроля версий
- **Bash** - командный интерпретатор в юниксоподобных системах


Используемые репозитории:
- **https://github.com/mercury131/otus-linux** - репозиторий для выполнения домашних заданий OTUS
- **https://github.com/mercury131/otus-linux/tree/master/lesson8** - ссылка на данное домашнее задание


 

 Задания на выбор
- **1) написать свою реализацию ps ax используя анализ /proc (- Результат ДЗ - рабочий скрипт который можно запустить)
- **2) написать свою реализацию lsof (- Результат ДЗ - рабочий скрипт который можно запустить)
- **3) дописать обработчики сигналов в прилагаемом скрипте, оттестировать, приложить сам скрипт, инструкции по использованию (- Результат ДЗ - рабочий скрипт который можно запустить + инструкция по использованию и лог консоли)
- **4) реализовать 2 конкурирующих процесса по IO. пробовать запустить с разными ionice (- Результат ДЗ - скрипт запускающий 2 процесса с разными ionice, замеряющий время выполнения и лог консоли)
- **5) реализовать 2 конкурирующих процесса по CPU. пробовать запустить с разными nice (- Результат ДЗ - скрипт запускающий 2 процесса с разными nice и замеряющий время выполнения и лог консоли)

В рамках данного домашнего задания выполнено:

- 1) написать свою реализацию ps ax используя анализ /proc (- Результат ДЗ - рабочий скрипт который можно запустить)
- 4) реализовать 2 конкурирующих процесса по IO. пробовать запустить с разными ionice (- Результат ДЗ - скрипт запускающий 2 процесса с разными ionice, замеряющий время выполнения и лог консоли)
- 5) реализовать 2 конкурирующих процесса по CPU. пробовать запустить с разными nice (- Результат ДЗ - скрипт запускающий 2 процесса с разными nice и замеряющий время выполнения и лог консоли)

Используемые файлы и директории:
- В директории lesson8 расположен Vagrantfile с образом Centos 7 и следующими скриптами:

- psaux.sh - скрипт аналог команды ps ax
- renice.sh - скрипт запускающий 2 конкурирующих процесса, изменяющий приоритет утилизации CPU
- ionice.sh - скрипт запускающий 2 конкурирующих процесса, изменяющий приоритет утилизации по IO


# Как проверить домашнее задание?

Склонируйте репозиторий:

```
git clone git@github.com:mercury131/otus-linux.git
```

Установите необходимые плагины для vagrant:

```
vagrant plugin install vagrant-reload
```

Для запуска Vagrantfile автоматизированными шагами выполните:

```
cd otus-linux/lesson8
vagrant up 
vagrant ssh
```


# Описание выполнения данного задания.

Устанавливаем необходимые пакеты:

```
yum install bc lsof iotop -y
```

Запускаем скрипт аналог psaux.sh

```
bash /vagrant/psaux.sh
```

Вывод:

```
[root@testproc vagrant]# bash /vagrant/psaux.sh
PID TTY STAT TIME COMMAND
1 /proc/1/mountinfo root S 0 /usr/lib/systemd/systemd--switched-root--system--deserialize22
10 ? root S 0 lru-add-drain
1079 ? root S 0 scsi_eh_0
1080 ? root S 0 scsi_tmf_0
1081 ? root S 0 scsi_eh_1
1082 ? root S 0 scsi_tmf_1
1084 ? root S 0 kworker/u2:3
1085 ? root S 0 scsi_eh_2
1086 ? root S 0 scsi_tmf_2
1088 ? root S 0 scsi_eh_3

```

Запускаем скрипт запускающий 2 конкурирующих процесса, изменяющий приоритет утилизации CPU

```
bash /vagrant/renice.sh
```

Вывод:

```
#### Result ###############
USER PID CPU% STAT COMMAND
root 5823 0.0 % R+ md5sum
root 5825 0.0 % RN+ md5sum
root 5839 0.0 % S+ grep
###########################
```

Запускаем скрипт запускающий 2 конкурирующих процесса, изменяющий приоритет утилизации IO

```
bash /vagrant/ionice.sh
```

Вывод показывает утилита iotop